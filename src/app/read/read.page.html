<ion-header>
  <ion-title>Read</ion-title>
  <ion-button [routerLink]="['../']"
    ><ion-icon name="arrow-undo"></ion-icon
  ></ion-button>
</ion-header>
<ion-button
  class="read-button"
  *ngIf=" connectedDevices.length > 0"
  (click)="read()"
  >Read</ion-button
>

<ion-content>
  <ng-container *ngIf="connectedDevices.length === 0;else oneConnectedDevice">
    <div id="no-connection">
      <ion-title>No connected devices</ion-title>
      <ion-spinner name="dots"></ion-spinner>
      <ion-button [routerLink]="['../connect']">Connect here</ion-button>
      <ion-img
        src="https://ouch-cdn2.icons8.com/1ZZrDFEr7Z5IT-89YDCw610CPo2TqbQSKsej5p-bTjY/rs:fit:1216:912/czM6Ly9pY29uczgu/b3VjaC1wcm9kLmFz/c2V0cy9zdmcvNjgx/LzZmNDVjOWQyLWQx/ZDQtNGRlYS1iNjM5/LTBkNDMwN2E0OTRk/MS5zdmc.png"
      ></ion-img>
      <span class="credit"
        >Illustration by
        <a
          href="https://icons8.com/illustrations/author/5eb2a7bd01d0360019f124e7"
          >Olha Khomich</a
        >
        from <a href="https://icons8.com/illustrations">Ouch!</a></span
      >
    </div>
  </ng-container>
  <ng-template #oneConnectedDevice>
    <ng-container
      *ngIf="connectedDevices.length === 1;else multipleConnectedDevices"
    >
      <!-- <ion-title class="current-value"
        >aaa{{connectedDevices[0].values[connectedDevices[0].values.length-1]}}</ion-title
      >
       --><ion-card-header>
        <ion-card-title>{{connectedDevices[0].device.name}}</ion-card-title>
        <ion-card-subtitle>{{connectedDevices[0].device.id}}</ion-card-subtitle>
      </ion-card-header>
      <ion-card *ngFor="let value of connectedDevices[0].values;">
        <ion-card-content *ngIf="value < 35.5">
          <p class="blue">{{value}}</p>
        </ion-card-content>
        <ion-card-content *ngIf="value >= 35.5 && value < 37.5">
          <p class="green">{{value}}</p>
        </ion-card-content>
        <ion-card-content *ngIf="value >= 37.5 && value < 38.3">
          <p class="orange">{{value}}</p>
        </ion-card-content>
        <ion-card-content *ngIf="value >= 38.3">
          <p class="red">{{value}}</p>
        </ion-card-content>
      </ion-card>
    </ng-container>
  </ng-template>
  <ng-template #multipleConnectedDevices>
    <ion-grid>
      <ion-row>
        <ion-col
          sizeLg="4"
          sizeMd="4"
          sizeXs="6"
          *ngFor="let connectedDevice of connectedDevices"
        >
          <ion-card>
            <ion-card-header>
              <ion-card-title>{{connectedDevice.device.name}}</ion-card-title>
              <ion-card-subtitle
                >{{connectedDevice.device.id}}</ion-card-subtitle
              >
            </ion-card-header>
            <ion-list>
              <ion-item *ngFor="let value of connectedDevice.values">
                <ion-label *ngIf="value < 35.5">
                  <p class="blue">{{value}}</p></ion-label
                >
                <ion-label *ngIf="value >= 35.5 && value < 37.5">
                  <p class="green">{{value}}</p></ion-label
                >
                <ion-label *ngIf="value >= 37.5 && value < 38.3">
                  <p class="orange">{{value}}</p></ion-label
                >
                <ion-label *ngIf="value >= 38.3">
                  <p class="red">{{value}}</p></ion-label
                >
              </ion-item>
            </ion-list>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ng-template></ion-content
>
